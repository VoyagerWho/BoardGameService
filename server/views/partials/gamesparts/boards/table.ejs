<script>
    const nr = <%= locals.game.board.rowCount %>;
    const nc = <%= locals.game.board.columnCount %>;
    function updateGUI(state) {
        document.getElementById('gameStatus').innerHTML = state.gameActiveDesc;
        document.getElementById('playerRound').innerHTML = state.nextPlayerDesc;

        for (var i = 0; i < nr; ++i) {
            var row = document.getElementById('brow' + i);
            for (var j = 0; j < nc; ++j) {
                cell = row.getElementsByTagName('td')[j];
                switch (state.board[nr * i + j]) {
                    case 0:
                        cell.innerText = ' ';
                        break;
                    case 1:
                        cell.innerText = 'O';
                        break;
                    case 2:
                        cell.innerText = 'X';
                        break;
                }
            }
        }
        const scoreboard = document.getElementById('scores');
        for (var i = 0; i < scoreboard.children.length; ++i)
            scoreboard.children[i].innerHTML = state.score[i].toString();
    }

    function setup() {
        console.log('Setup finished!');
    }
</script>
<% const board=locals.game.board; var orl=0; var ocl=0; switch (board.rowLabels) { case "d" : orl=49; break; case "l" :
    orl=97; break; } switch (board.columnLabels) { case "d" : ocl=49; break; case "l" : ocl=97; break; } if (orl> 0 &&
    ocl > 0) { %>
    <table id="board" class="board">
        <tbody>
            <tr class="board boardsquare">
                <th class="board boardsquare"></th>
                <% for (var i=0; i < board.columnCount; ++i) { %>
                    <th class="board boardsquare">
                        <%= String.fromCharCode(ocl+i) %>
                    </th>
                    <% } %>
            </tr>
            <% for (var i=0; i < board.rowCount; ++i) { %>
                <tr id="brow<%= i%>" class="board boardsquare">
                    <th class="board boardsquare">
                        <%= String.fromCharCode(orl+i)%>
                    </th>
                    <% for (var j=0; j < board.columnCount; ++j) {%>
                        <td class="board boardsquare"
                            onclick="makeMove('<%= String.fromCharCode(ocl+j) + String.fromCharCode(orl+i)%>')"></td>
                        <% } %>
                </tr>
                <% } %>
        </tbody>
    </table>
    <%- include('../misc/score.ejs') %>
        <% } else { %>Nie znany rodzaj numeracji!<% } %>